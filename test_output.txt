============================= test session starts =============================
platform win32 -- Python 3.12.10, pytest-8.4.2, pluggy-1.6.0 -- C:\Users\ameliapayne\AppData\Local\Microsoft\WindowsApps\PythonSoftwareFoundation.Python.3.12_qbz5n2kfra8p0\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\ameliapayne\PokePoke
configfile: pyproject.toml
plugins: anyio-4.10.0, asyncio-1.2.0, cov-7.0.0, env-1.2.0, mock-3.15.1, timeout-2.4.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 252 items

tests/test_agent_runner.py::TestHasUncommittedChanges::test_no_changes PASSED [  0%]
tests/test_agent_runner.py::TestHasUncommittedChanges::test_has_changes PASSED [  0%]
tests/test_agent_runner.py::TestHasUncommittedChanges::test_git_error PASSED [  1%]
tests/test_agent_runner.py::TestCommitAllChanges::test_successful_commit PASSED [  1%]
tests/test_agent_runner.py::TestCommitAllChanges::test_commit_failure_with_errors PASSED [  1%]
tests/test_agent_runner.py::TestInvokeCleanupAgent::test_successful_cleanup PASSED [  2%]
tests/test_agent_runner.py::TestInvokeCleanupAgent::test_missing_cleanup_prompt PASSED [  2%]
tests/test_agent_runner.py::TestInvokeCleanupAgent::test_cleanup_failure PASSED [  3%]
tests/test_agent_runner.py::TestInvokeCleanupAgent::test_cleanup_with_labels PASSED [  3%]
tests/test_agent_runner.py::TestAggregateCleanupStats::test_aggregate_with_both_stats PASSED [  3%]
tests/test_agent_runner.py::TestAggregateCleanupStats::test_aggregate_with_none_cleanup_stats PASSED [  4%]
tests/test_agent_runner.py::TestAggregateCleanupStats::test_aggregate_with_none_result_stats PASSED [  4%]
tests/test_agent_runner.py::TestRunCleanupLoop::test_no_uncommitted_changes PASSED [  5%]
tests/test_agent_runner.py::TestRunCleanupLoop::test_successful_commit_first_try PASSED [  5%]
tests/test_agent_runner.py::TestRunCleanupLoop::test_commit_fails_cleanup_succeeds PASSED [  5%]
tests/test_agent_runner.py::TestRunCleanupLoop::test_cleanup_agent_fails PASSED [  6%]
tests/test_agent_runner.py::TestRunMaintenanceAgent::test_beads_only_agent PASSED [  6%]
tests/test_agent_runner.py::TestRunMaintenanceAgent::test_worktree_agent PASSED [  7%]
tests/test_agent_runner.py::TestRunMaintenanceAgent::test_missing_prompt_file PASSED [  7%]
tests/test_agent_runner.py::TestRunBeadsOnlyAgent::test_successful_beads_agent PASSED [  7%]
tests/test_agent_runner.py::TestRunBeadsOnlyAgent::test_failed_beads_agent PASSED [  8%]
tests/test_agent_runner.py::TestRunWorktreeAgent::test_successful_worktree_agent PASSED [  8%]
tests/test_agent_runner.py::TestRunWorktreeAgent::test_worktree_creation_failure PASSED [  9%]
tests/test_agent_runner.py::TestRunWorktreeAgent::test_worktree_agent_failure PASSED [  9%]
tests/test_beads.py::TestBeadsIntegration::test_get_ready_work_items_empty PASSED [  9%]
tests/test_beads.py::TestBeadsIntegration::test_get_ready_work_items_with_items PASSED [ 10%]
tests/test_beads.py::TestBeadsIntegration::test_get_ready_work_items_filters_warnings PASSED [ 10%]
tests/test_beads.py::TestBeadsIntegration::test_get_issue_dependencies_found PASSED [ 11%]
tests/test_beads.py::TestBeadsIntegration::test_get_issue_dependencies_not_found PASSED [ 11%]
tests/test_beads.py::TestBeadsIntegration::test_get_issue_dependencies_empty_result PASSED [ 11%]
tests/test_beads.py::TestBeadsIntegration::test_get_issue_dependencies_no_json_start PASSED [ 12%]
tests/test_beads.py::TestFilterWorkItems::test_filter_work_items_excludes_epics PASSED [ 12%]
tests/test_beads.py::TestFilterWorkItems::test_filter_work_items_includes_features PASSED [ 13%]
tests/test_beads.py::TestFilterWorkItems::test_filter_work_items_excludes_tasks_with_feature_parent PASSED [ 13%]
tests/test_beads.py::TestFilterWorkItems::test_filter_work_items_includes_standalone_tasks PASSED [ 13%]
tests/test_beads.py::TestFilterWorkItems::test_has_feature_parent_true PASSED [ 14%]
tests/test_beads.py::TestFilterWorkItems::test_has_feature_parent_false_no_dependencies PASSED [ 14%]
tests/test_beads.py::TestFilterWorkItems::test_has_feature_parent_false_non_parent_dependency PASSED [ 15%]
tests/test_beads.py::TestFilterWorkItems::test_has_feature_parent_error_handling PASSED [ 15%]
tests/test_beads_stats.py::TestGetBeadsStats::test_get_beads_stats_success PASSED [ 15%]
tests/test_beads_stats.py::TestGetBeadsStats::test_get_beads_stats_missing_fields PASSED [ 16%]
tests/test_beads_stats.py::TestGetBeadsStats::test_get_beads_stats_command_failure PASSED [ 16%]
tests/test_beads_stats.py::TestGetBeadsStats::test_get_beads_stats_invalid_json PASSED [ 17%]
tests/test_copilot.py::TestGetAllowedDirectories::test_allowed_directories_with_git PASSED [ 17%]
tests/test_copilot.py::TestGetAllowedDirectories::test_allowed_directories_git_fails PASSED [ 17%]
tests/test_copilot.py::TestGetAllowedDirectories::test_allowed_directories_different_root PASSED [ 18%]
tests/test_copilot.py::TestBuildPromptFromTemplate::test_build_prompt_from_template PASSED [ 18%]
tests/test_copilot.py::TestBuildPrompt::test_build_prompt_with_labels PASSED [ 19%]
tests/test_copilot.py::TestBuildPrompt::test_build_prompt_without_labels PASSED [ 19%]
tests/test_copilot.py::TestInvokeCopilot::test_invoke_copilot_success PASSED [ 19%]
tests/test_copilot.py::TestInvokeCopilot::test_invoke_copilot_with_params PASSED [ 20%]
tests/test_copilot_sdk.py::TestGetAllowedDirectoriesSDK::test_allowed_directories_with_git PASSED [ 20%]
tests/test_copilot_sdk.py::TestGetAllowedDirectoriesSDK::test_allowed_directories_git_fails PASSED [ 21%]
tests/test_copilot_sdk.py::TestGetAllowedDirectoriesSDK::test_allowed_directories_different_root PASSED [ 21%]
tests/test_copilot_sdk.py::TestBuildPromptFromWorkItem::test_build_prompt_from_work_item PASSED [ 21%]
tests/test_copilot_sdk.py::TestBuildPromptFromWorkItem::test_build_prompt_without_labels PASSED [ 22%]
tests/test_create_issue.py::TestCreateIssue::test_create_issue_basic PASSED [ 22%]
tests/test_create_issue.py::TestCreateIssue::test_create_issue_with_description PASSED [ 23%]
tests/test_create_issue.py::TestCreateIssue::test_create_issue_with_parent PASSED [ 23%]
tests/test_create_issue.py::TestCreateIssue::test_create_issue_with_labels PASSED [ 23%]
tests/test_create_issue.py::TestCreateIssue::test_create_issue_subprocess_error PASSED [ 24%]
tests/test_create_issue.py::TestCreateIssue::test_create_issue_json_parse_error PASSED [ 24%]
tests/test_create_issue.py::TestCreateIssue::test_create_issue_array_response PASSED [ 25%]
tests/test_create_issue.py::TestCreateIssue::test_create_issue_empty_response PASSED [ 25%]
tests/test_git_operations.py::TestVerifyMainRepoClean::test_clean_repo PASSED [ 25%]
tests/test_git_operations.py::TestVerifyMainRepoClean::test_only_beads_changes PASSED [ 26%]
tests/test_git_operations.py::TestVerifyMainRepoClean::test_non_beads_changes PASSED [ 26%]
tests/test_git_operations.py::TestVerifyMainRepoClean::test_mixed_changes PASSED [ 26%]
tests/test_git_operations.py::TestVerifyMainRepoClean::test_git_error PASSED [ 27%]
tests/test_git_operations.py::TestVerifyMainRepoClean::test_empty_lines_filtered PASSED [ 27%]
tests/test_git_operations.py::TestHandleBeadsAutoCommit::test_successful_commit PASSED [ 28%]
tests/test_git_operations.py::TestHandleBeadsAutoCommit::test_commit_failure PASSED [ 28%]
tests/test_git_operations.py::TestHandleBeadsAutoCommit::test_add_failure PASSED [ 28%]
tests/test_git_operations.py::TestCheckMainRepoReadyForMerge::test_clean_repo PASSED [ 29%]
tests/test_git_operations.py::TestCheckMainRepoReadyForMerge::test_only_beads_changes_auto_commit PASSED [ 29%]
tests/test_git_operations.py::TestCheckMainRepoReadyForMerge::test_non_beads_changes_not_ready PASSED [ 30%]
tests/test_git_operations.py::TestCheckMainRepoReadyForMerge::test_auto_commit_failure PASSED [ 30%]
tests/test_git_operations.py::TestCheckMainRepoReadyForMerge::test_verify_exception PASSED [ 30%]
tests/test_git_operations.py::TestHasUncommittedChanges::test_no_changes PASSED [ 31%]
tests/test_git_operations.py::TestHasUncommittedChanges::test_has_changes PASSED [ 31%]
tests/test_git_operations.py::TestHasUncommittedChanges::test_whitespace_only PASSED [ 32%]
tests/test_git_operations.py::TestHasUncommittedChanges::test_git_error PASSED [ 32%]
tests/test_git_operations.py::TestCommitAllChanges::test_successful_commit PASSED [ 32%]
tests/test_git_operations.py::TestCommitAllChanges::test_commit_with_default_message PASSED [ 33%]
tests/test_git_operations.py::TestCommitAllChanges::test_commit_failure_with_stderr PASSED [ 33%]
tests/test_git_operations.py::TestCommitAllChanges::test_commit_failure_no_stderr PASSED [ 34%]
tests/test_git_operations.py::TestCommitAllChanges::test_add_stage_exception PASSED [ 34%]
tests/test_git_operations.py::TestCommitAllChanges::test_commit_stage_exception PASSED [ 34%]
tests/test_git_operations.py::TestCommitAllChanges::test_error_line_limit PASSED [ 35%]
tests/test_hierarchical.py::TestHierarchicalWorkAssignment::test_get_children_no_dependents PASSED [ 35%]
tests/test_hierarchical.py::TestHierarchicalWorkAssignment::test_get_children_with_parent_dependents PASSED [ 36%]
tests/test_hierarchical.py::TestHierarchicalWorkAssignment::test_get_next_child_task_no_children PASSED [ 36%]
tests/test_hierarchical.py::TestHierarchicalWorkAssignment::test_get_next_child_task_all_complete PASSED [ 36%]
tests/test_hierarchical.py::TestHierarchicalWorkAssignment::test_get_next_child_task_returns_highest_priority PASSED [ 37%]
tests/test_hierarchical.py::TestHierarchicalWorkAssignment::test_all_children_complete_no_children PASSED [ 37%]
tests/test_hierarchical.py::TestHierarchicalWorkAssignment::test_all_children_complete_with_open_children PASSED [ 38%]
tests/test_hierarchical.py::TestHierarchicalWorkAssignment::test_all_children_complete_all_done PASSED [ 38%]
tests/test_hierarchical.py::TestHierarchicalWorkAssignment::test_close_parent_if_complete_not_complete PASSED [ 38%]
tests/test_hierarchical.py::TestHierarchicalWorkAssignment::test_close_parent_if_complete_success PASSED [ 39%]
tests/test_hierarchical.py::TestHierarchicalWorkAssignment::test_close_item_success PASSED [ 39%]
tests/test_hierarchical.py::TestHierarchicalWorkAssignment::test_close_item_failure PASSED [ 40%]
tests/test_hierarchical.py::TestHierarchicalWorkAssignment::test_get_parent_id_no_dependencies PASSED [ 40%]
tests/test_hierarchical.py::TestHierarchicalWorkAssignment::test_get_parent_id_with_parent PASSED [ 40%]
tests/test_hierarchical.py::TestHierarchicalWorkAssignment::test_select_next_hierarchical_item_epic_with_children PASSED [ 41%]
tests/test_hierarchical.py::TestHierarchicalWorkAssignment::test_select_next_hierarchical_item_epic_all_children_complete PASSED [ 41%]
tests/test_hierarchical.py::TestHierarchicalWorkAssignment::test_select_next_hierarchical_item_standalone_task PASSED [ 42%]
tests/test_hierarchical.py::TestHierarchicalWorkAssignment::test_select_next_hierarchical_item_empty_list PASSED [ 42%]
tests/test_logging.py::test_run_logger_initialization PASSED             [ 42%]
tests/test_logging.py::test_run_logger_orchestrator_logging PASSED       [ 43%]
tests/test_logging.py::test_run_logger_item_logging PASSED               [ 43%]
tests/test_logging.py::test_run_logger_finalize PASSED                   [ 44%]
tests/test_logging.py::test_run_logger_maintenance_logging PASSED        [ 44%]
tests/test_logging.py::test_item_logger_sanitizes_filenames PASSED       [ 44%]
tests/test_logging.py::test_multiple_item_logs PASSED                    [ 45%]
tests/test_orchestrator.py::TestSelectWorkItem::test_select_work_item_empty_list PASSED [ 45%]
tests/test_orchestrator.py::TestSelectWorkItem::test_select_work_item_autonomous_mode PASSED [ 46%]
tests/test_orchestrator.py::TestSelectWorkItem::test_select_work_item_interactive_quit PASSED [ 46%]
tests/test_orchestrator.py::TestSelectWorkItem::test_select_work_item_interactive_valid_selection PASSED [ 46%]
tests/test_orchestrator.py::TestSelectWorkItem::test_select_work_item_interactive_invalid_then_valid PASSED [ 47%]
tests/test_orchestrator.py::TestSelectWorkItem::test_select_work_item_interactive_out_of_range PASSED [ 47%]
tests/test_orchestrator.py::TestProcessWorkItem::test_process_work_item_success_no_parent FAILED [ 48%]
tests/test_orchestrator.py::TestProcessWorkItem::test_process_work_item_success_with_parent FAILED [ 48%]
tests/test_orchestrator.py::TestProcessWorkItem::test_process_work_item_failure PASSED [ 48%]
tests/test_orchestrator.py::TestRunOrchestrator::test_run_orchestrator_no_items PASSED [ 49%]
tests/test_orchestrator.py::TestRunOrchestrator::test_run_orchestrator_single_shot_success PASSED [ 49%]
tests/test_orchestrator.py::TestRunOrchestrator::test_run_orchestrator_single_shot_failure PASSED [ 50%]
tests/test_orchestrator.py::TestRunOrchestrator::test_run_orchestrator_continuous_quit PASSED [ 50%]
tests/test_orchestrator.py::TestRunOrchestrator::test_run_orchestrator_exception_handling PASSED [ 50%]
tests/test_orchestrator.py::TestCheckMainRepoReadyForMerge::test_clean_repo PASSED [ 51%]
tests/test_orchestrator.py::TestCheckMainRepoReadyForMerge::test_beads_only_changes PASSED [ 51%]
tests/test_orchestrator.py::TestCheckMainRepoReadyForMerge::test_non_beads_changes PASSED [ 51%]
tests/test_orchestrator.py::TestCheckMainRepoReadyForMerge::test_subprocess_error PASSED [ 52%]
tests/test_orchestrator.py::TestRunOrchestratorContinuousMode::test_continuous_autonomous_multiple_items PASSED [ 52%]
tests/test_orchestrator.py::TestRunOrchestratorContinuousMode::test_maintenance_agents_triggered PASSED [ 53%]
tests/test_orchestrator.py::TestRunOrchestratorContinuousMode::test_continuous_interactive_loop PASSED [ 53%]
tests/test_orchestrator.py::TestOrchestratorHelperFunctions::test_check_and_commit_main_repo_with_non_beads_changes PASSED [ 53%]
tests/test_orchestrator.py::TestOrchestratorHelperFunctions::test_aggregate_stats PASSED [ 54%]
tests/test_orchestrator.py::TestOrchestratorMain::test_main_autonomous PASSED [ 54%]
tests/test_orchestrator.py::TestOrchestratorMain::test_main_continuous PASSED [ 55%]
tests/test_orchestrator.py::TestOrchestratorMain::test_main_both_flags PASSED [ 55%]
tests/test_orchestrator_cleanup.py::TestOrchestratorCleanupDetection::test_detects_uncommitted_changes_and_invokes_cleanup PASSED [ 55%]
tests/test_orchestrator_cleanup.py::TestOrchestratorCleanupDetection::test_autocommits_beads_changes PASSED [ 56%]
tests/test_orchestrator_cleanup.py::TestOrchestratorCleanupDetection::test_clean_repo_proceeds_to_work PASSED [ 56%]
tests/test_prompts.py::test_prompt_service_initialization PASSED         [ 57%]
tests/test_prompts.py::test_load_prompt_exists PASSED                    [ 57%]
tests/test_prompts.py::test_load_prompt_not_found PASSED                 [ 57%]
tests/test_prompts.py::test_render_simple_variables PASSED               [ 58%]
tests/test_prompts.py::test_render_conditional_section_shown PASSED      [ 58%]
tests/test_prompts.py::test_render_conditional_section_hidden PASSED     [ 59%]
tests/test_prompts.py::test_render_conditional_with_variables PASSED     [ 59%]
tests/test_prompts.py::test_render_missing_variable PASSED               [ 59%]
tests/test_prompts.py::test_load_and_render PASSED                       [ 60%]
tests/test_prompts.py::test_render_work_item_with_labels PASSED          [ 60%]
tests/test_prompts.py::test_render_work_item_without_labels PASSED       [ 61%]
tests/test_prompts.py::test_render_retry_template PASSED                 [ 61%]
tests/test_prompts.py::test_render_retry_template_no_retry PASSED        [ 61%]
tests/test_prompts.py::test_render_array_iteration PASSED                [ 62%]
tests/test_prompts.py::test_render_array_empty PASSED                    [ 62%]
tests/test_prompts.py::test_render_beads_item_with_labels PASSED         [ 63%]
tests/test_stats_display.py::test_print_stats_with_full_stats PASSED     [ 63%]
tests/test_stats_display.py::test_print_stats_with_partial_stats PASSED  [ 63%]
tests/test_stats_display.py::test_print_stats_with_no_stats PASSED       [ 64%]
tests/test_stats_display.py::test_print_stats_with_none_stats PASSED     [ 64%]
tests/test_stats_display.py::test_print_stats_time_formatting PASSED     [ 65%]
tests/test_stats_display.py::test_print_stats_average_time PASSED        [ 65%]
tests/test_stats_display.py::test_print_stats_zero_items_no_average PASSED [ 65%]
tests/test_stats_display.py::test_print_stats_with_large_numbers PASSED  [ 66%]
tests/test_stats_display.py::test_print_stats_with_beads_statistics PASSED [ 66%]
tests/test_stats_display.py::test_print_stats_with_agent_run_counts PASSED [ 67%]
tests/test_stats_display.py::test_print_stats_with_only_work_agent_runs PASSED [ 67%]
tests/test_stats_parsing.py::test_parse_agent_stats_with_all_fields PASSED [ 67%]
tests/test_stats_parsing.py::test_parse_agent_stats_with_partial_fields PASSED [ 68%]
tests/test_stats_parsing.py::test_parse_agent_stats_with_no_stats PASSED [ 68%]
tests/test_stats_parsing.py::test_parse_agent_stats_with_empty_output PASSED [ 69%]
tests/test_stats_parsing.py::test_parse_agent_stats_with_alternative_premium_format PASSED [ 69%]
tests/test_stats_parsing.py::test_parse_agent_stats_with_tokens_in_thousands PASSED [ 69%]
tests/test_stats_parsing.py::test_parse_agent_stats_with_tokens_without_k PASSED [ 70%]
tests/test_stats_parsing.py::test_parse_agent_stats_with_zero_changes PASSED [ 70%]
tests/test_stats_parsing.py::test_parse_agent_stats_with_invalid_format PASSED [ 71%]
tests/test_stats_parsing.py::test_parse_agent_stats_with_exception_handling PASSED [ 71%]
tests/test_types.py::TestBeadsWorkItem::test_create_basic_work_item PASSED [ 71%]
tests/test_types.py::TestBeadsWorkItem::test_create_work_item_with_description PASSED [ 72%]
tests/test_types.py::TestCopilotResult::test_create_successful_result PASSED [ 72%]
tests/test_types.py::TestCopilotResult::test_create_failed_result PASSED [ 73%]
tests/test_types.py::TestDependency::test_create_dependency PASSED       [ 73%]
tests/test_workflow.py::TestSelectWorkItem::test_empty_list PASSED       [ 73%]
tests/test_workflow.py::TestInteractiveSelection::test_valid_selection PASSED [ 74%]
tests/test_workflow.py::TestInteractiveSelection::test_quit_selection PASSED [ 74%]
tests/test_workflow.py::TestInteractiveSelection::test_invalid_then_valid PASSED [ 75%]
tests/test_workflow.py::TestInteractiveSelection::test_out_of_range_then_valid PASSED [ 75%]
tests/test_workflow.py::TestInteractiveSelection::test_keyboard_interrupt PASSED [ 75%]
tests/test_workflow.py::TestAutonomousSelection::test_item_selected PASSED [ 76%]
tests/test_workflow.py::TestAutonomousSelection::test_no_item_selected PASSED [ 76%]
tests/test_workflow.py::TestSetupWorktree::test_successful_setup PASSED  [ 76%]
tests/test_workflow.py::TestSetupWorktree::test_creation_failure PASSED  [ 77%]
tests/test_workflow.py::TestRunCleanupWithTimeout::test_no_uncommitted_changes PASSED [ 77%]
tests/test_workflow.py::TestRunCleanupWithTimeout::test_cleanup_success PASSED [ 78%]
tests/test_workflow.py::TestRunCleanupWithTimeout::test_timeout_during_cleanup PASSED [ 78%]
tests/test_workflow.py::TestRunCleanupWithTimeout::test_cleanup_failure PASSED [ 78%]
tests/test_workflow.py::TestCheckAndMergeWorktree::test_no_commits_to_merge PASSED [ 79%]
tests/test_workflow.py::TestCheckAndMergeWorktree::test_has_commits_to_merge PASSED [ 79%]
tests/test_workflow.py::TestCheckAndMergeWorktree::test_commit_count_check_fails PASSED [ 80%]
tests/test_workflow.py::TestMergeWorktreeToDev::test_successful_merge PASSED [ 80%]
tests/test_workflow.py::TestMergeWorktreeToDev::test_repo_not_ready PASSED [ 80%]
tests/test_workflow.py::TestMergeWorktreeToDev::test_merge_fails PASSED  [ 81%]
tests/test_workflow.py::TestCloseWorkItemAndParents::test_item_already_closed PASSED [ 81%]
tests/test_workflow.py::TestCloseWorkItemAndParents::test_item_not_closed_fallback PASSED [ 82%]
tests/test_workflow.py::TestCloseWorkItemAndParents::test_check_status_fails PASSED [ 82%]
tests/test_workflow.py::TestCheckParentHierarchy::test_no_parent PASSED  [ 82%]
tests/test_workflow.py::TestCheckParentHierarchy::test_with_parent_no_grandparent PASSED [ 83%]
tests/test_workflow.py::TestCheckParentHierarchy::test_with_parent_and_grandparent PASSED [ 83%]
tests/test_workflow.py::TestProcessWorkItem::test_skip_in_interactive_mode PASSED [ 84%]
tests/test_workflow.py::TestProcessWorkItem::test_worktree_setup_fails PASSED [ 84%]
tests/test_workflow.py::TestProcessWorkItem::test_no_changes_made PASSED [ 84%]
tests/test_workflow.py::TestProcessWorkItem::test_copilot_failure PASSED [ 85%]
tests/test_worktrees.py::TestGetMainRepoRoot::test_get_main_repo_root_in_main_repo PASSED [ 85%]
tests/test_worktrees.py::TestGetMainRepoRoot::test_get_main_repo_root_in_worktree PASSED [ 86%]
tests/test_worktrees.py::TestGetMainRepoRoot::test_get_main_repo_root_not_in_git_repo PASSED [ 86%]
tests/test_worktrees.py::TestIsWorktreeClean::test_is_worktree_clean_true PASSED [ 86%]
tests/test_worktrees.py::TestIsWorktreeClean::test_is_worktree_clean_false PASSED [ 87%]
tests/test_worktrees.py::TestIsWorktreeClean::test_is_worktree_clean_subprocess_error PASSED [ 87%]
tests/test_worktrees.py::TestVerifyBranchPushed::test_verify_branch_pushed_exists PASSED [ 88%]
tests/test_worktrees.py::TestVerifyBranchPushed::test_verify_branch_pushed_not_exists PASSED [ 88%]
tests/test_worktrees.py::TestVerifyBranchPushed::test_verify_branch_pushed_subprocess_error PASSED [ 88%]
tests/test_worktrees.py::TestCreateWorktree::test_create_worktree_success PASSED [ 89%]
tests/test_worktrees.py::TestCreateWorktree::test_create_worktree_with_custom_base_branch PASSED [ 89%]
tests/test_worktrees.py::TestCreateWorktree::test_create_worktree_already_exists_by_path PASSED [ 90%]
tests/test_worktrees.py::TestCreateWorktree::test_create_worktree_already_exists_by_branch PASSED [ 90%]
tests/test_worktrees.py::TestCreateWorktree::test_create_worktree_branch_already_exists_error_recovery PASSED [ 90%]
tests/test_worktrees.py::TestCreateWorktree::test_create_worktree_unrecoverable_error PASSED [ 91%]
tests/test_worktrees.py::TestIsWorktreeMerged::test_is_worktree_merged_true PASSED [ 91%]
tests/test_worktrees.py::TestIsWorktreeMerged::test_is_worktree_merged_false PASSED [ 92%]
tests/test_worktrees.py::TestIsWorktreeMerged::test_is_worktree_merged_with_custom_target PASSED [ 92%]
tests/test_worktrees.py::TestIsWorktreeMerged::test_is_worktree_merged_subprocess_error PASSED [ 92%]
tests/test_worktrees.py::TestMergeWorktree::test_merge_worktree_dirty_worktree PASSED [ 93%]
tests/test_worktrees.py::TestMergeWorktree::test_merge_worktree_success PASSED [ 93%]
tests/test_worktrees.py::TestMergeWorktree::test_merge_worktree_success_no_cleanup PASSED [ 94%]
tests/test_worktrees.py::TestMergeWorktree::test_merge_worktree_bd_sync_failure PASSED [ 94%]
tests/test_worktrees.py::TestMergeWorktree::test_merge_worktree_with_beads_changes PASSED [ 94%]
tests/test_worktrees.py::TestMergeWorktree::test_merge_worktree_with_non_beads_changes PASSED [ 95%]
tests/test_worktrees.py::TestMergeWorktree::test_merge_worktree_wrong_branch_after_merge PASSED [ 95%]
tests/test_worktrees.py::TestMergeWorktree::test_merge_worktree_dirty_after_merge PASSED [ 96%]
tests/test_worktrees.py::TestMergeWorktree::test_merge_worktree_not_merged_after_merge PASSED [ 96%]
tests/test_worktrees.py::TestMergeWorktree::test_merge_worktree_subprocess_error PASSED [ 96%]
tests/test_worktrees.py::TestCleanupWorktree::test_cleanup_worktree_success PASSED [ 97%]
tests/test_worktrees.py::TestCleanupWorktree::test_cleanup_worktree_force PASSED [ 97%]
tests/test_worktrees.py::TestCleanupWorktree::test_cleanup_worktree_not_exists PASSED [ 98%]
tests/test_worktrees.py::TestCleanupWorktree::test_cleanup_worktree_subprocess_error PASSED [ 98%]
tests/test_worktrees.py::TestListWorktrees::test_list_worktrees_success PASSED [ 98%]
tests/test_worktrees.py::TestListWorktrees::test_list_worktrees_empty PASSED [ 99%]
tests/test_worktrees.py::TestListWorktrees::test_list_worktrees_subprocess_error PASSED [ 99%]
tests/test_worktrees.py::TestListWorktrees::test_list_worktrees_partial_info PASSED [100%]

================================== FAILURES ===================================
________ TestProcessWorkItem.test_process_work_item_success_no_parent _________
tests\test_orchestrator.py:209: in test_process_work_item_success_no_parent
    result = process_work_item(item, interactive=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\pokepoke\workflow.py:124: in process_work_item
    beta_stats = run_beta_tester()
                 ^^^^^^^^^^^^^^^^^
src\pokepoke\agent_runner.py:391: in run_beta_tester
    copilot_result = invoke_copilot(beta_item, prompt=beta_prompt, deny_write=True)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\pokepoke\copilot.py:135: in invoke_copilot
    return invoke_copilot_sdk_sync(
E   TypeError: invoke_copilot_sdk_sync() got an unexpected keyword argument 'item_logger'
---------------------------- Captured stdout call -----------------------------
\n\U0001f680 Processing work item: task-1\n   Task\n   \u23f1\ufe0f  Timeout: 2.0 hours\n\n\n\U0001f512 Claiming work item on main branch...\n\u2705 Assigned task-1 to agent and marked in_progress\n\u2705 Synced assignment - other agents will see task-1 is claimed\n\n\U0001f333 Creating worktree for task-1...\n   Created at: /tmp/worktree\n   Switched to worktree directory\n\n\n\u2705 No changes made - work item may already be complete\n   Skipping cleanup and commit steps\n\n\u2705 Successfully completed work item!\n   All changes committed and validated\n\n\U0001f50d Checking if main repo is ready for merge...\n\n\U0001f500 Merging worktree for task-1...\n   Merged and cleaned up worktree\n\n\U0001f50d Checking if agent closed beads item task-1...\n   \u26a0\ufe0f  Item not closed by agent, closing now...\n\n============================================================\n\U0001f9ea Running Beta Tester Agent\n============================================================\n\n\U0001f504 Restarting MCP server to load latest changes...\n\u2713 MCP server restarted successfully\n\n\U0001f9ea Invoking beta tester agent...
_______ TestProcessWorkItem.test_process_work_item_success_with_parent ________
tests\test_orchestrator.py:282: in test_process_work_item_success_with_parent
    result = process_work_item(item, interactive=False)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\pokepoke\workflow.py:124: in process_work_item
    beta_stats = run_beta_tester()
                 ^^^^^^^^^^^^^^^^^
src\pokepoke\agent_runner.py:391: in run_beta_tester
    copilot_result = invoke_copilot(beta_item, prompt=beta_prompt, deny_write=True)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src\pokepoke\copilot.py:135: in invoke_copilot
    return invoke_copilot_sdk_sync(
E   TypeError: invoke_copilot_sdk_sync() got an unexpected keyword argument 'item_logger'
---------------------------- Captured stdout call -----------------------------
\n\U0001f680 Processing work item: task-1\n   Task\n   \u23f1\ufe0f  Timeout: 2.0 hours\n\n\n\U0001f512 Claiming work item on main branch...\n\u2705 Assigned task-1 to agent and marked in_progress\n\u2705 Synced assignment - other agents will see task-1 is claimed\n\n\U0001f333 Creating worktree for task-1...\n   Created at: /tmp/worktree\n   Switched to worktree directory\n\n\n\u2705 No changes made - work item may already be complete\n   Skipping cleanup and commit steps\n\n\u2705 Successfully completed work item!\n   All changes committed and validated\n\n\U0001f50d Checking if main repo is ready for merge...\n\n\U0001f500 Merging worktree for task-1...\n   Merged and cleaned up worktree\n\n\U0001f50d Checking if agent closed beads item task-1...\n   \u26a0\ufe0f  Item not closed by agent, closing now...\n\n\U0001f50d Checking parent feature-1 completion status...\n\n============================================================\n\U0001f9ea Running Beta Tester Agent\n============================================================\n\n\U0001f504 Restarting MCP server to load latest changes...\n\u2713 MCP server restarted successfully\n\n\U0001f9ea Invoking beta tester agent...
=========================== short test summary info ===========================
FAILED tests/test_orchestrator.py::TestProcessWorkItem::test_process_work_item_success_no_parent
FAILED tests/test_orchestrator.py::TestProcessWorkItem::test_process_work_item_success_with_parent
======================== 2 failed, 250 passed in 6.40s ========================
